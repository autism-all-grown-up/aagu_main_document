# Budget {#budget}

## Overview
```{r, include=F, warning=FALSE, message=FALSE}
library(tidyverse)
# library(gt)
source('utilities/format_budget_table.R')
source('utilities/format_staffing_table.R')


data <- read_csv('data/jobs_data.csv') %>% 
  tibble()

output_format <- knitr::opts_knit$get("rmarkdown.pandoc.to")
output_format <- ifelse(is.null(output_format), "normal", output_format)
```

Autism All Grown Up will place a strong emphasis on hiring autistic and neurodiverse Oregon adults and paying them a market wage. The wages will be at the low end during the initial Seed and Sprout phases and increase during the later phases. The hourly rates shown represent full compensation on a 1099 and do not include benefits. We will make necessary adjustments when we are able to provide benefits as well.

We have created our budget estimate based on the minimum staffing we believe can meet our performance goals combined with market-rate salary estimates from [ZipRecruiter](https://www.ziprecruiter.com/Salaries) for approximate job titles in the Portland, OR area (see @sec-representative-salaries). We project a budget of approximately \$150,000 for the first six months (26 weeks) of operation.

```{r, include=F, warning=FALSE, message=FALSE}
library(tidyverse)
library(kableExtra)
source('utilities/format_staffing_table.R')
source('utilities/format_budget_table.R')

data <- read_csv('data/jobs_data.csv') %>% 
  tibble()

output_format <- knitr::opts_knit$get("rmarkdown.pandoc.to")
output_format <- ifelse(is.null(output_format), "normal", output_format)
```


# Seed Phase
```{r, warning=FALSE, message=FALSE, include = (output_format != "latex"), echo = F}

n_weeks = 8
overhead = 0.1

seed_budget = 
  data %>% 
  filter(Phase == "seed") %>% 
  arrange(FTE) %>% 
  select(Responsibility, Description, FTE, Rate) %>% 
  
  ### Add weekly cost per employee and overhead
  mutate(
    `Weekly Rate` = FTE * Rate * 40,
    Overhead = `Weekly Rate` * overhead
  ) %>% 
  
  ### Create rows for totals
  rows_append(
    rbind(
      
      ### Simple sum 
      summarize(., 
        Responsibility = "Subtotal per Week",
        Description = "",
        FTE = sum(FTE),
        Rate = NA,
        `Weekly Rate` = sum(`Weekly Rate`),
        Overhead = sum(Overhead)
      ),
      
      ### Add overhead and weekly rate
      summarize(., 
        Responsibility = "Total per Week",
        Description = "",
        FTE = sum(FTE),
        Rate = NA,
        `Weekly Rate` = sum(`Weekly Rate`)*(1 + overhead),
        Overhead = NA
      ),
      
      ### Multiply by number of weeks
      summarize(., 
        Responsibility = str_glue("Total for {n_weeks} Weeks"),
        Description = "",
        FTE = NA,
        Rate = NA,
        `Weekly Rate` = sum(`Weekly Rate`)*(1 + overhead)*n_weeks,
        Overhead = NA
      )
    )
  )

seed_budget %>% 
  kable(
    format = ifelse(output_format == "latex", "latex", "html"),
    # col.names = c("Responsibility", "FTE", "Description"),
    align = c("l", "l", "r", "r", "r"),
    escape = FALSE,
    booktabs = output_format == "latex"
  ) %>%
    kable_styling(
      bootstrap_options = ifelse(output_format == "html", c("striped", "hover", "condensed"), NULL),
      latex_options = ifelse(output_format == "latex", c("striped", "hold_position"), NULL),
      full_width = FALSE
    ) %>%
    row_spec(0, bold = TRUE, background = "lightgrey", align = "c") %>%
    row_spec(nrow(data), extra_css = "border-top: 1px solid black;") %>%
    row_spec(nrow(data), extra_css = "border-bottom: 2px solid black;")
```

